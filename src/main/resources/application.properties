spring.application.name=postiqa-back-v2

# ========================================
# Spring Modulith Configuration
# ========================================

# Enable runtime module boundary validation
spring.modulith.validation.enabled=true

# Enable detection of module interactions
spring.modulith.events.enabled=true

# Enable observability for module events
spring.modulith.observability.enabled=true

# Generate module documentation on startup (dev only)
# spring.modulith.documentation.enabled=true

# ========================================
# Apify Configuration
# ========================================

# Apify API credentials
apify.api-key=${APIFY_API_KEY:your-apify-api-key-here}
apify.base-url=https://api.apify.com

# Timeout and retry settings
apify.default-timeout=5m
apify.polling-interval=5s
apify.max-retries=3

# Actor IDs for social platforms
apify.social-actors.LINKEDIN=apify/linkedin-profile-scraper
apify.social-actors.TWITTER=apify/twitter-scraper
apify.social-actors.INSTAGRAM=apidojo/instagram-scraper
apify.social-actors.TIKTOK=scraptik~tiktok-api
apify.social-actors.YOUTUBE=apify/youtube-scraper

# Actor IDs for web scraping
apify.web-actors.default=apify/web-scraper
apify.web-actors.blog_article=apify/cheerio-scraper
apify.web-actors.product_page=apify/web-scraper

# ========================================
# OpenAI Configuration (via Spring AI)
# ========================================

spring.ai.openai.api-key=${OPENAI_API_KEY:your-openai-api-key-here}
spring.ai.openai.base-url=https://api.openai.com
spring.ai.openai.chat.model=gpt-4-turbo-preview
spring.ai.openai.chat.temperature=0.7
spring.ai.openai.chat.max-tokens=2000

# ========================================
# Async Executor Configuration
# ========================================

# Thread pool settings for async scraping
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=25
spring.task.execution.thread-name-prefix=scraping-async-

# ========================================
# Cache Configuration
# ========================================

# Spring Cache (in-memory)
spring.cache.type=simple
spring.cache.cache-names=socialPosts,socialProfiles,websiteContent,scrapingJobs

# ========================================
# Logging Configuration
# ========================================

logging.level.fr.postiqa.core=INFO
logging.level.fr.postiqa.core.infrastructure.client=DEBUG
logging.level.fr.postiqa.gateway=DEBUG
logging.level.org.springframework.cache=DEBUG
logging.level.org.springframework.security=DEBUG

# ========================================
# JWT Configuration
# ========================================

# JWT secret key (MUST be changed in production - use environment variable)
jwt.secret=${JWT_SECRET:ThisIsAVeryLongSecretKeyForJWTSigningAtLeast256BitsLongForHS256AlgorithmSecurity}

# Token validity (in milliseconds)
jwt.access-token-validity-ms=900000
# 15 minutes (900000ms)
jwt.refresh-token-validity-ms=2592000000
# 30 days (2592000000ms)

# ========================================
# OAuth2 Client Configuration
# ========================================

# Google OAuth2
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:your-google-client-id}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:your-google-client-secret}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/google

# LinkedIn OAuth2
spring.security.oauth2.client.registration.linkedin.client-id=${LINKEDIN_CLIENT_ID:your-linkedin-client-id}
spring.security.oauth2.client.registration.linkedin.client-secret=${LINKEDIN_CLIENT_SECRET:your-linkedin-client-secret}
spring.security.oauth2.client.registration.linkedin.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.linkedin.redirect-uri={baseUrl}/login/oauth2/code/linkedin
spring.security.oauth2.client.registration.linkedin.scope=r_liteprofile,r_emailaddress
spring.security.oauth2.client.provider.linkedin.authorization-uri=https://www.linkedin.com/oauth/v2/authorization
spring.security.oauth2.client.provider.linkedin.token-uri=https://www.linkedin.com/oauth/v2/accessToken
spring.security.oauth2.client.provider.linkedin.user-info-uri=https://api.linkedin.com/v2/me
spring.security.oauth2.client.provider.linkedin.user-name-attribute=id

# GitHub OAuth2
spring.security.oauth2.client.registration.github.client-id=${GITHUB_CLIENT_ID:your-github-client-id}
spring.security.oauth2.client.registration.github.client-secret=${GITHUB_CLIENT_SECRET:your-github-client-secret}
spring.security.oauth2.client.registration.github.scope=user:email
spring.security.oauth2.client.registration.github.redirect-uri={baseUrl}/login/oauth2/code/github

# OAuth2 Success/Failure Handling
oauth2.redirect-uri=${OAUTH2_REDIRECT_URI:http://localhost:3000/auth/callback}
oauth2.response-mode=${OAUTH2_RESPONSE_MODE:redirect}

# ========================================
# Email Configuration
# ========================================

# SMTP settings (Gmail example - use environment variables in production)
spring.mail.host=${SMTP_HOST:smtp.gmail.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:your-email@gmail.com}
spring.mail.password=${SMTP_PASSWORD:your-app-password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Email sender
mail.from.address=${MAIL_FROM_ADDRESS:noreply@postiqa.fr}
mail.from.name=Postiqa

# Email verification
mail.verification.url=${APP_BASE_URL:http://localhost:8080}/api/auth/verify-email
mail.verification.token-validity-hours=24

# Password reset
mail.password-reset.url=${APP_BASE_URL:http://localhost:8080}/reset-password
mail.password-reset.token-validity-hours=1

# ========================================
# CORS Configuration
# ========================================

# Allowed origins (comma-separated, use * for all origins in dev only)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:4200}

# ========================================
# API Keys Configuration
# ========================================

# API key default expiration (in days, 0 = no expiration)
api-key.default-expiration-days=365

# ========================================
# Social Media Platform OAuth2 Configuration
# (For connecting business social accounts)
# ========================================

# LinkedIn Social Publishing API
social.linkedin.client-id=${SOCIAL_LINKEDIN_CLIENT_ID:your-linkedin-app-client-id}
social.linkedin.client-secret=${SOCIAL_LINKEDIN_CLIENT_SECRET:your-linkedin-app-client-secret}

# Twitter/X API v2
social.twitter.client-id=${SOCIAL_TWITTER_CLIENT_ID:your-twitter-app-client-id}
social.twitter.client-secret=${SOCIAL_TWITTER_CLIENT_SECRET:your-twitter-app-client-secret}

# Instagram (Meta Business API)
social.instagram.client-id=${SOCIAL_INSTAGRAM_CLIENT_ID:your-meta-app-id}
social.instagram.client-secret=${SOCIAL_INSTAGRAM_CLIENT_SECRET:your-meta-app-secret}

# YouTube (Google API)
social.youtube.client-id=${SOCIAL_YOUTUBE_CLIENT_ID:your-google-app-client-id}
social.youtube.client-secret=${SOCIAL_YOUTUBE_CLIENT_SECRET:your-google-app-client-secret}

# TikTok Login Kit
social.tiktok.client-id=${SOCIAL_TIKTOK_CLIENT_ID:your-tiktok-app-client-key}
social.tiktok.client-secret=${SOCIAL_TIKTOK_CLIENT_SECRET:your-tiktok-app-client-secret}

# ========================================
# Liquibase Configuration
# ========================================

# Enable Liquibase migrations
spring.liquibase.enabled=true
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.xml

# ========================================
# Cloudflare R2 Storage Configuration
# ========================================

# R2 endpoint (S3-compatible)
storage.r2.endpoint=${R2_ENDPOINT:https://your-account-id.r2.cloudflarestorage.com}
storage.r2.bucket=${R2_BUCKET:postiqa-media}
storage.r2.access-key=${R2_ACCESS_KEY:your-r2-access-key}
storage.r2.secret-key=${R2_SECRET_KEY:your-r2-secret-key}
storage.r2.region=${R2_REGION:auto}

# Optional: CDN URL for public access (if configured)
storage.r2.cdn-url=${R2_CDN_URL:}
